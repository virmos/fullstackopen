{"version":3,"sources":["components/Person.js","components/Persons.js","components/Form.js","components/SearchFilter.js","components/Notification.js","components/Services.js","App.js","index.js"],"names":["Person","name","number","removePerson","className","onClick","Persons","persons","map","person","id","Form","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","SearchFilter","Notification","message","isError","isSuccess","baseUrl","personServices","getAll","axios","get","then","response","data","create","newObject","post","remove","delete","update","put","App","useState","setPersons","filteredPersons","setFilteredPersons","setNewName","setNewNumber","nameToFilter","setNameToFilter","notificationMessage","setNotificationMessage","setIsSuccess","setIsError","useEffect","getAllPersons","targetName","toLowerCase","filter","includes","handleSuccessMessage","setTimeout","handleErrorMessage","event","target","trim","preventDefault","personsWithSameName","length","window","confirm","newPerson","catch","error","require","EventEmitter","prototype","_maxListeners","updatedPersons","lastId","updateRequests","removeLast","Promise","all","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9fb3838a.chunk.js","sourcesContent":["import React from 'react'\r\nconst Person = ({name, number, removePerson}) => {\r\n    return (\r\n        <li>\r\n          {name} : {number} \r\n          <button className=\"btn\" onClick={removePerson}>Remove</button>\r\n        </li>\r\n    )\r\n}\r\nexport default Person","import React from 'react'\r\nimport Person from './Person.js'\r\nconst Persons = ({persons, removePerson}) => {\r\n  return (\r\n    <ul>\r\n      {persons.map(person => \r\n      <Person key={person.id} name={person.name} number={person.number}\r\n        removePerson={() => removePerson(person.id, person.name)}/>)\r\n      }\r\n    </ul>\r\n    )\r\n}\r\nexport default Persons","import React from 'react'\r\nconst Form = (props) => {\r\n    return (\r\n      <form onSubmit={props.addPerson}>\r\n        <div> name: <input value={props.newName} onChange={props.handleNameChange}/></div>\r\n        <div> number: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\nexport default Form","import React from 'react'\r\nconst SearchFilter = ({onChange}) => {\r\n    return (\r\n        <input onChange={onChange}/>\r\n    )\r\n}\r\nexport default SearchFilter","import React from 'react'\r\n\r\nconst Notification = ({message, isError, isSuccess}) => {\r\n    if (isError) {\r\n        return (\r\n            <div className=\"noti error\"> {message} </div>\r\n        )\r\n    }\r\n    else if (isSuccess) {\r\n        return (\r\n            <div className=\"noti success\"> {message} </div>\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"noti\"> {message} </div>\r\n    )\r\n}\r\nexport default Notification","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst get = (id) => {\r\n    const request = axios.get(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n  \r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst personServices = { getAll, get, create, remove, update }\r\nexport default personServices","import React, { useState, useEffect } from 'react'\n\nimport './App.css';\nimport Persons from './components/Persons.js'\nimport Form from './components/Form.js'\nimport SearchFilter from './components/SearchFilter.js'\nimport Notification from './components/Notification.js';\nimport personServices from './components/Services.js'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [filteredPersons, setFilteredPersons] = useState(persons)\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [nameToFilter, setNameToFilter] = useState('')\n\n  const [notificationMessage, setNotificationMessage] = useState('')\n  const [isSuccess, setIsSuccess] = useState(false)\n  const [isError, setIsError] = useState(false)\n\n  useEffect(() => {\n    getAllPersons()\n  }, [])\n\n  useEffect(() => {\n    if (nameToFilter === \"\") {  \n      setFilteredPersons(persons)\n    } else {\n      const targetName = nameToFilter.toLowerCase()\n      setFilteredPersons(persons.filter(person => person.name.toLowerCase().includes(targetName)))\n    }\n  }, [nameToFilter, persons])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value.trim())\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value.trim())\n  }\n\n  const handleNameFilter = (event) => {\n    setNameToFilter(event.target.value.trim())\n  }\n\n  const handleSuccessMessage = (message) => {\n    setNotificationMessage(message)\n    setIsSuccess(true)\n    setTimeout(() => {\n      setNotificationMessage(null)\n      setIsSuccess(false)\n    }, 2000)\n  }\n\n  const handleErrorMessage = (message) => {\n    setNotificationMessage(message)\n    setIsError(true)\n    setTimeout(() => {\n      setNotificationMessage(null)\n      setIsError(false)\n    }, 2000)\n  }\n\n  const getAllPersons = () => {\n    personServices\n    .getAll()              \n    .then(data => {\n      setPersons(data)\n    })\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personsWithSameName = persons.filter((person) => person.name === newName)\n    if (personsWithSameName.length === 1) {\n      if (window.confirm(`Update ${newName}?`)) {\n        const id = personsWithSameName[0].id\n        const newPerson = {\n          name: newName, number: newNumber, id: id // ids are current array length\n        }\n        personServices.update(id, newPerson)\n        .then(getAllPersons())\n        .catch(error => {\n          handleErrorMessage(error)\n        })\n        handleSuccessMessage(`Updated ${newName}`)\n\n      }\n    } \n    else {\n      const newPerson = {\n        name: newName, number: newNumber, id: persons.length + 1 // ids are current array length\n      }\n      personServices.create(newPerson)\n      .then(getAllPersons)\n      .catch(error => {\n        handleErrorMessage(error)\n      })\n      handleSuccessMessage(`Updated ${newName}`)\n    }\n  }\n\n  const removePerson = (id, name) => {\n    if (persons.filter((person) => person.id === id).length === 0) {\n      handleErrorMessage(`Person with ${id} cannot be found the phonebook`)\n    } \n    else {\n      if (window.confirm(`Delete ${name}?`)) {\n        require('events').EventEmitter.prototype._maxListeners = 70;\n\n        const personsToUpdate = persons.filter(person => person.id > id)\n        const updatedPersons = personsToUpdate.map(person => {\n          const newPerson = {\n            ...person, id : person.id - 1\n          }\n          return newPerson\n        })\n\n        const lastId = persons.length\n\n        const updateRequests = updatedPersons.map(person => personServices.update(person.id, person))\n        const removeLast = personServices.remove(lastId)\n        Promise.all(updateRequests)\n        .then(removeLast)\n        .then(getAllPersons)\n        .catch(error => {\n          setNotificationMessage('Removed')\n          handleErrorMessage(error)\n        })\n        handleSuccessMessage(`Successfully remove ${name}`)\n\n      }\n    }\n  }\n  \n  return (\n    <div>\n      <h2>Filter shown with</h2>\n      <Notification message={notificationMessage} isError={isError} isSuccess={isSuccess}/>\n      <SearchFilter onChange={handleNameFilter}/>\n\n      <h2>Phonebook</h2>\n      <Form name={newName} number={newNumber} addPerson={addPerson} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}/>\n      \n      <h2>Numbers</h2>\n      <Persons persons={filteredPersons} \n        removePerson={removePerson}\n      />\n\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}