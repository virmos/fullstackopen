(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(17),o=n.n(a),i=(n(22),n(8)),u=n(3),s=(n(23),n(0)),j=function(e){var t=e.name,n=e.number,c=e.removePerson;return Object(s.jsxs)("li",{children:[t," : ",n,Object(s.jsx)("button",{className:"btn",onClick:c,children:"Remove"})]})},b=function(e){var t=e.persons,n=e.removePerson;return Object(s.jsx)("ul",{children:t.map((function(e){return Object(s.jsx)(j,{name:e.name,number:e.number,removePerson:function(){return n(e.id,e.name)}},e.id)}))})},d=function(e){return Object(s.jsxs)("form",{onSubmit:e.addPerson,children:[Object(s.jsxs)("div",{children:[" name: ",Object(s.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(s.jsxs)("div",{children:[" number: ",Object(s.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.onChange;return Object(s.jsx)("input",{onChange:t})},l=function(e){var t=e.message,n=e.isError,c=e.isSuccess;return n?Object(s.jsxs)("div",{className:"noti error",children:[" ",t," "]}):c?Object(s.jsxs)("div",{className:"noti success",children:[" ",t," "]}):Object(s.jsxs)("div",{className:"noti",children:[" ",t," "]})},h=n(4),m=n.n(h),O="/api/persons",v={getAll:function(){return m.a.get(O).then((function(e){return e.data}))},get:function(e){return m.a.get("".concat(O,"/").concat(e)).then((function(e){return e.data}))},create:function(e){return m.a.post(O,e).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return m.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))}},p=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),r=t[0],a=t[1],o=Object(c.useState)(r),j=Object(u.a)(o,2),h=j[0],m=j[1],O=Object(c.useState)(""),p=Object(u.a)(O,2),x=p[0],g=p[1],w=Object(c.useState)(""),S=Object(u.a)(w,2),C=S[0],N=S[1],P=Object(c.useState)(""),k=Object(u.a)(P,2),E=k[0],y=k[1],L=Object(c.useState)(""),U=Object(u.a)(L,2),A=U[0],D=U[1],J=Object(c.useState)(!1),R=Object(u.a)(J,2),T=R[0],B=R[1],F=Object(c.useState)(!1),I=Object(u.a)(F,2),M=I[0],_=I[1];Object(c.useEffect)((function(){G()}),[]),Object(c.useEffect)((function(){if(""===E)m(r);else{var e=E.toLowerCase();m(r.filter((function(t){return t.name.toLowerCase().includes(e)})))}}),[E,r]);var q=function(e){D(e),B(!0),setTimeout((function(){D(null),B(!1)}),2e3)},z=function(e){D(e),_(!0),setTimeout((function(){D(null),_(!1)}),2e3)},G=function(){v.getAll().then((function(e){a(e)}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Filter shown with"}),Object(s.jsx)(l,{message:A,isError:M,isSuccess:T}),Object(s.jsx)(f,{onChange:function(e){y(e.target.value.trim())}}),Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(d,{name:x,number:C,addPerson:function(e){e.preventDefault();var t=r.filter((function(e){return e.name===x}));if(1===t.length){if(window.confirm("Update ".concat(x,"?"))){var n=t[0].id,c={name:x,number:C,id:n};v.update(n,c).then(G()).catch((function(e){z(e)})),q("Updated ".concat(x))}}else{var a={name:x,number:C,id:r.length+1};v.create(a).then(G).catch((function(e){z(e)})),q("Updated ".concat(x))}},handleNameChange:function(e){g(e.target.value.trim())},handleNumberChange:function(e){N(e.target.value.trim())}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(b,{persons:h,removePerson:function(e,t){if(0===r.filter((function(t){return t.id===e})).length)z("Person with ".concat(e," cannot be found the phonebook"));else if(window.confirm("Delete ".concat(t,"?"))){n(43).EventEmitter.prototype._maxListeners=70;var c=r.filter((function(t){return t.id>e})).map((function(e){return Object(i.a)(Object(i.a)({},e),{},{id:e.id-1})})),a=r.length,o=c.map((function(e){return v.update(e.id,e)})),u=v.remove(a);Promise.all(o).then(u).then(G).catch((function(e){D("Removed"),z(e)})),q("Successfully remove ".concat(t))}}})]})};o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(p,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.9fb3838a.chunk.js.map